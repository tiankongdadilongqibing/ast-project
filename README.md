# ä»£ç åˆè§„æ£€æŸ¥å·¥å…·

åŸºäº ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰çš„ä»£ç åˆè§„æ€§æ£€æŸ¥å·¥å…·ï¼Œæ”¯æŒè‡ªå®šä¹‰è§„åˆ™æ¥æ£€æŸ¥ä»£ç ä»“åº“ä¸­çš„ä¸åˆè§„å†™æ³•ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” **åŸºäº AST çš„ä»£ç åˆ†æ**ï¼šä½¿ç”¨ Babel è§£æå™¨è¿›è¡Œç²¾ç¡®çš„ä»£ç åˆ†æ
- âš™ï¸ **è‡ªå®šä¹‰è§„åˆ™é…ç½®**ï¼šé€šè¿‡å‰ç«¯ç•Œé¢è½»æ¾é…ç½®æ£€æŸ¥è§„åˆ™
- ğŸ¯ **çµæ´»çš„è§„åˆ™æ¨¡å¼**ï¼šæ”¯æŒç»„ä»¶å±æ€§æ£€æŸ¥ã€Hook æ£€æŸ¥ã€API è°ƒç”¨æ£€æŸ¥ç­‰
- ğŸ“Š **å¯è§†åŒ–ç»“æœå±•ç¤º**ï¼šæ¸…æ™°çš„é—®é¢˜æŠ¥å‘Šå’Œç»Ÿè®¡ä¿¡æ¯
- ğŸš€ **å¿«é€Ÿæ‰«æ**ï¼šæ”¯æŒæ‰¹é‡æ£€æŸ¥å¤šä¸ªæ–‡ä»¶

## æŠ€æœ¯æ ˆ

### åç«¯
- Node.js + TypeScript
- Express
- Babel Parser & Traverse
- Glob (æ–‡ä»¶åŒ¹é…)

### å‰ç«¯
- React + TypeScript
- Vite
- Axios

## å®‰è£…

1. å®‰è£…ä¾èµ–ï¼š

```bash
npm install
cd client
npm install
cd ..
```

## è¿è¡Œ

### å¼€å‘æ¨¡å¼

åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯ï¼š

```bash
npm run dev
```

æˆ–è€…åˆ†åˆ«å¯åŠ¨ï¼š

```bash
# åç«¯ï¼ˆç«¯å£ 3001ï¼‰
npm run dev:server

# å‰ç«¯ï¼ˆç«¯å£ 3000ï¼‰
npm run dev:client
```

### ç”Ÿäº§æ¨¡å¼

```bash
# æ„å»º
npm run build

# å¯åŠ¨
npm start
```

## ä½¿ç”¨è¯´æ˜

### 1. é…ç½®è§„åˆ™

åœ¨"è§„åˆ™é…ç½®"æ ‡ç­¾é¡µä¸­ï¼š

- ç‚¹å‡»"æ·»åŠ è§„åˆ™"åˆ›å»ºæ–°è§„åˆ™
- è®¾ç½®è§„åˆ™ IDã€åç§°ã€æè¿°å’Œä¸¥é‡ç¨‹åº¦
- é€‰æ‹©æ£€æŸ¥ç±»å‹ï¼ˆç»„ä»¶/Hook/APIï¼‰
- é…ç½®å±æ€§è§„åˆ™ï¼š
  - **å¿…éœ€å±æ€§**ï¼šç»„ä»¶å¿…é¡»åŒ…å«æŸä¸ªå±æ€§
  - **ç¼ºå¤±å±æ€§æ£€æŸ¥**ï¼šå½“æŸä¸ªå±æ€§å­˜åœ¨æ—¶ï¼Œå¿…é¡»æä¾›å…¶ä»–å±æ€§

### 2. è®¾ç½®æ£€æŸ¥è·¯å¾„

åœ¨"æ£€æŸ¥è®¾ç½®"æ ‡ç­¾é¡µä¸­ï¼š

- è¾“å…¥ç›®æ ‡ä»£ç ä»“åº“çš„**ç»å¯¹è·¯å¾„**
- é…ç½®æ–‡ä»¶åŒ¹é…æ¨¡å¼ï¼ˆæ”¯æŒ glob æ¨¡å¼ï¼‰
- ç‚¹å‡»"å¼€å§‹æ£€æŸ¥"

### 3. æŸ¥çœ‹ç»“æœ

åœ¨"æ£€æŸ¥ç»“æœ"æ ‡ç­¾é¡µä¸­ï¼š

- æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ€»æ–‡ä»¶æ•°ã€é—®é¢˜æ•°é‡ç­‰ï¼‰
- æŒ‰æ–‡ä»¶åˆ†ç»„æŸ¥çœ‹å…·ä½“é—®é¢˜
- æŸ¥çœ‹é—®é¢˜ä½ç½®ã€è§„åˆ™åç§°å’Œé”™è¯¯ä¿¡æ¯

## ç¤ºä¾‹è§„åˆ™

### ç¦ç”¨æŒ‰é’®ç¼ºå°‘æç¤º

æ£€æŸ¥å½“ Button ç»„ä»¶è®¾ç½®äº† `disabled` å±æ€§æ—¶ï¼Œæ˜¯å¦æä¾›äº† `title` æˆ– `tooltip` å±æ€§ã€‚

```json
{
  "id": "button-disabled-no-tooltip",
  "name": "ç¦ç”¨æŒ‰é’®ç¼ºå°‘æç¤º",
  "description": "å½“Buttonç»„ä»¶è®¾ç½®äº†disabledå±æ€§æ—¶ï¼Œå¿…é¡»æä¾›titleæˆ–tooltipå±æ€§",
  "severity": "warning",
  "pattern": {
    "type": "component",
    "componentName": "Button",
    "props": {
      "disabled": {
        "missing": ["title", "tooltip"]
      }
    }
  }
}
```

### å¿…å¡«è¾“å…¥æ¡†ç¼ºå°‘æ ‡ç­¾

æ£€æŸ¥å½“ Input ç»„ä»¶è®¾ç½®äº† `required` å±æ€§æ—¶ï¼Œæ˜¯å¦æä¾›äº† `label` å±æ€§ã€‚

```json
{
  "id": "input-required-no-label",
  "name": "å¿…å¡«è¾“å…¥æ¡†ç¼ºå°‘æ ‡ç­¾",
  "description": "å½“Inputç»„ä»¶è®¾ç½®äº†requiredå±æ€§æ—¶ï¼Œå¿…é¡»æä¾›labelå±æ€§",
  "severity": "warning",
  "pattern": {
    "type": "component",
    "componentName": "Input",
    "props": {
      "required": {
        "missing": ["label"]
      }
    }
  }
}
```

### å›¾ç‰‡ç¼ºå°‘ alt å±æ€§

æ£€æŸ¥ Image ç»„ä»¶æ˜¯å¦æä¾›äº† `alt` å±æ€§ã€‚

```json
{
  "id": "image-missing-alt",
  "name": "å›¾ç‰‡ç¼ºå°‘altå±æ€§",
  "description": "Imageç»„ä»¶å¿…é¡»æä¾›altå±æ€§ä»¥æå‡å¯è®¿é—®æ€§",
  "severity": "error",
  "pattern": {
    "type": "component",
    "componentName": "Image",
    "props": {
      "alt": {
        "required": true
      }
    }
  }
}
```

## è§„åˆ™é…ç½®è¯´æ˜

### è§„åˆ™ç±»å‹

- **component**ï¼šæ£€æŸ¥ JSX ç»„ä»¶
- **hook**ï¼šæ£€æŸ¥ React Hook è°ƒç”¨
- **api**ï¼šæ£€æŸ¥ API å‡½æ•°è°ƒç”¨

### å±æ€§è§„åˆ™

- **required**: å±æ€§æ˜¯å¦å¿…éœ€
- **value**: å±æ€§çš„æœŸæœ›å€¼
- **missing**: å½“æ­¤å±æ€§å­˜åœ¨æ—¶ï¼Œå¿…é¡»æä¾›çš„å…¶ä»–å±æ€§åˆ—è¡¨

## API æ¥å£

### GET /api/rules/examples

è·å–é¢„å®šä¹‰çš„ç¤ºä¾‹è§„åˆ™ã€‚

### POST /api/check

æ‰§è¡Œä»£ç æ£€æŸ¥ã€‚

**è¯·æ±‚ä½“ï¼š**

```json
{
  "targetPath": "/path/to/code",
  "rules": [...],
  "filePatterns": ["**/*.tsx", "**/*.jsx"]
}
```

**å“åº”ï¼š**

```json
{
  "violations": [...],
  "totalFiles": 100,
  "checkedFiles": 100,
  "duration": 1234
}
```

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ server/              # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ ast/            # AST è§£æå™¨
â”‚   â”œâ”€â”€ checker.ts      # ä»£ç æ£€æŸ¥å™¨
â”‚   â”œâ”€â”€ index.ts        # Express æœåŠ¡å™¨
â”‚   â””â”€â”€ types.ts        # ç±»å‹å®šä¹‰
â”œâ”€â”€ client/             # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/ # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ api.ts      # API è°ƒç”¨
â”‚   â”‚   â””â”€â”€ App.tsx     # ä¸»åº”ç”¨
â”‚   â””â”€â”€ ...
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## æ³¨æ„äº‹é¡¹

1. **è·¯å¾„æ ¼å¼**ï¼šWindows ç³»ç»Ÿä½¿ç”¨åæ–œæ ï¼ˆ`\`ï¼‰ï¼ŒLinux/Mac ä½¿ç”¨æ­£æ–œæ ï¼ˆ`/`ï¼‰
2. **æ–‡ä»¶æƒé™**ï¼šç¡®ä¿å¯¹ç›®æ ‡è·¯å¾„æœ‰è¯»å–æƒé™
3. **æ€§èƒ½**ï¼šå¤§å‹ä»£ç åº“çš„æ£€æŸ¥å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
4. **å¿½ç•¥æ–‡ä»¶**ï¼šé»˜è®¤å¿½ç•¥ `node_modules`ã€`dist`ã€`build` ç›®å½•

## å¼€å‘

### æ·»åŠ æ–°çš„æ£€æŸ¥è§„åˆ™ç±»å‹

1. åœ¨ `server/ast/parser.ts` ä¸­æ·»åŠ æ–°çš„æ£€æŸ¥é€»è¾‘
2. åœ¨ `server/types.ts` ä¸­æ‰©å±• `RulePattern` ç±»å‹
3. åœ¨å‰ç«¯ `RuleEditor` ç»„ä»¶ä¸­æ·»åŠ ç›¸åº”çš„ UI

## è®¸å¯è¯

MIT

